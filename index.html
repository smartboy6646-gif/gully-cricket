<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cricket Scorer - Quick Start</title>
    <style>
        :root { --p: #1a237e; --s: #ffd600; --bg: #f0f2f5; }
        body { font-family: sans-serif; background: var(--bg); margin: 0; padding: 10px; display: flex; justify-content: center; }
        .card { width: 100%; max-width: 450px; background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); min-height: 90vh; display: flex; flex-direction: column; overflow: hidden; }
        
        #setup-screen, #bowler-change-screen { position: fixed; inset: 0; background: white; z-index: 2000; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        #bowler-change-screen { background: rgba(0,0,0,0.9); display: none; color: white; justify-content: center; }

        .header { background: var(--p); color: white; padding: 15px; text-align: center; }
        .score-val { font-size: 3rem; font-weight: bold; margin: 5px 0; }
        
        .players-live { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 10px; background: #e8eaf6; border-radius: 8px; margin: 10px; }
        .active-p { border-left: 4px solid var(--p); padding-left: 8px; font-weight: bold; }

        .tables-area { flex-grow: 1; padding: 10px; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 0.85rem; margin-bottom: 15px; }
        th { text-align: left; background: #eee; padding: 8px; }
        td { padding: 8px; border-bottom: 1px solid #ddd; }

        .controls { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; padding: 10px; background: #ddd; }
        button { padding: 15px 5px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; }
        .btn-run { background: white; }
        .btn-extra { background: #ffecb3; }
        .btn-w { background: #f44336; color: white; grid-column: span 2; }
        .btn-start { background: var(--p); color: white; padding: 15px; font-size: 1.2rem; }
        
        .bowler-list-item { background: white; color: black; padding: 12px; margin: 5px; border-radius: 5px; text-align: center; }
    </style>
</head>
<body>

<div id="setup-screen">
    <h2 style="color:var(--p)">üèè Cricket Setup</h2>
    <input type="text" id="teamA" placeholder="Batting Team" value="Nepal">
    <input type="text" id="teamB" placeholder="Bowling Team" value="India">
    <hr>
    <input type="text" id="bat1" placeholder="Striker Name" value="Batsman 1">
    <input type="text" id="bat2" placeholder="Non-Striker Name" value="Batsman 2">
    <input type="text" id="bowl1" placeholder="Bowler Name" value="Bowler 1">
    <button class="btn-start" onclick="initMatch()">PLAY NOW</button>
</div>

<div id="bowler-change-screen">
    <div style="background:white; padding:20px; border-radius:10px; color:black; text-align:center;">
        <h3>Select Next Bowler</h3>
        <div id="past-bowlers"></div>
        <input type="text" id="new-bw-name" placeholder="New Bowler Name" style="width:80%; padding:10px; margin:10px 0;">
        <button onclick="changeBowler(document.getElementById('new-bw-name').value)" style="background:var(--p); color:white; padding:10px; width:85%;">ADD NEW</button>
    </div>
</div>

<div class="card">
    <div class="header">
        <div id="ui-batting-team">TEAM</div>
        <div class="score-val" id="ui-score">0 - 0</div>
        <div id="ui-overs">Overs: 0.0</div>
    </div>

    <div class="players-live">
        <div id="ui-s-box" class="active-p">S: <span id="ui-s-nm">-</span><br><b id="ui-s-r">0</b>(<span id="ui-s-b">0</span>)</div>
        <div id="ui-ns-box">NS: <span id="ui-ns-nm">-</span><br><b id="ui-ns-r">0</b>(<span id="ui-ns-b">0</span>)</div>
    </div>
    <div style="padding: 0 15px; font-size: 0.9rem;">Bowler: <b id="ui-bw-nm">-</b></div>

    <div class="tables-area">
        <h4>Batsmen</h4>
        <table id="bat-table"><thead><tr><th>Name</th><th>R</th><th>B</th></tr></thead><tbody></tbody></table>
        
        <h4>Bowlers (Live Stats)</h4>
        <table id="bwl-table"><thead><tr><th>Name</th><th>O</th><th>R</th><th>W</th></tr></thead><tbody></tbody></table>
    </div>

    <div class="controls">
        <button class="btn-run" onclick="run(0)">0</button>
        <button class="btn-run" onclick="run(1)">1</button>
        <button class="btn-run" onclick="run(2)">2</button>
        <button class="btn-run" onclick="run(3)">3</button>
        <button class="btn-run" style="background:#fff176" onclick="run(4)">4</button>
        <button class="btn-run" style="background:#ffb300" onclick="run(6)">6</button>
        <button class="btn-extra" onclick="extra()">WD/NB</button>
        <button class="btn-w" onclick="wicket()">WICKET</button>
        <button class="btn-start" style="grid-column: span 4;" onclick="location.reload()">RESTART</button>
    </div>
</div>

<script>
    let state = {
        batTeam: "", bowlTeam: "", score: 0, wickets: 0, balls: 0,
        striker: "", nonStriker: "", bowler: "",
        batStats: {}, bwlStats: {}, bowlerList: []
    };

    function initMatch() {
        state.batTeam = document.getElementById('teamA').value;
        state.bowlTeam = document.getElementById('teamB').value;
        state.striker = document.getElementById('bat1').value;
        state.nonStriker = document.getElementById('bat2').value;
        state.bowler = document.getElementById('bowl1').value;

        regBat(state.striker); regBat(state.nonStriker);
        changeBowler(state.bowler);

        document.getElementById('setup-screen').style.display = 'none';
        updateUI();
    }

    function regBat(n) { if(!state.batStats[n]) state.batStats[n] = {r:0, b:0}; }
    function regBwl(n) { 
        if(!state.bwlStats[n]) {
            state.bwlStats[n] = {o:0, r:0, w:0};
            state.bowlerList.push(n);
        }
    }

    function run(r) {
        state.score += r; state.balls++;
        state.batStats[state.striker].r += r;
        state.batStats[state.striker].b++;
        state.bwlStats[state.bowler].r += r;
        state.bwlStats[state.bowler].o++;

        if(r % 2 !== 0) swap();
        if(state.balls % 6 === 0) showBowlerChange();
        updateUI();
    }

    function extra() {
        state.score += 1;
        state.bwlStats[state.bowler].r += 1;
        updateUI();
    }

    function swap() { let t = state.striker; state.striker = state.nonStriker; state.nonStriker = t; }

    function showBowlerChange() {
        swap(); updateUI();
        let div = document.getElementById('past-bowlers');
        div.innerHTML = "";
        state.bowlerList.forEach(name => {
            let b = document.createElement('div');
            b.className = "bowler-list-item";
            b.innerText = name;
            b.onclick = () => changeBowler(name);
            div.appendChild(b);
        });
        document.getElementById('bowler-change-screen').style.display = 'flex';
    }

    function changeBowler(n) {
        if(!n) return;
        state.bowler = n;
        regBwl(n);
        document.getElementById('bowler-change-screen').style.display = 'none';
        document.getElementById('new-bw-name').value = "";
        updateUI();
    }

    function wicket() {
        state.wickets++; state.balls++;
        state.batStats[state.striker].b++;
        state.bwlStats[state.bowler].w++;
        state.bwlStats[state.bowler].o++;
        updateUI();
        if(state.wickets < 10) {
            let n = prompt("New Batsman Name:");
            if(n) { state.striker = n; regBat(n); }
        } else { alert("All Out!"); location.reload(); }
        if(state.balls % 6 === 0) showBowlerChange();
        updateUI();
    }

    function updateUI() {
        document.getElementById('ui-batting-team').innerText = state.batTeam;
        document.getElementById('ui-score').innerText = state.score + " - " + state.wickets;
        document.getElementById('ui-overs').innerText = "Overs: " + Math.floor(state.balls/6) + "." + (state.balls%6);
        document.getElementById('ui-s-nm').innerText = state.striker;
        document.getElementById('ui-s-r').innerText = state.batStats[state.striker].r;
        document.getElementById('ui-s-b').innerText = state.batStats[state.striker].b;
        document.getElementById('ui-ns-nm').innerText = state.nonStriker;
        document.getElementById('ui-ns-r').innerText = state.batStats[state.nonStriker].r;
        document.getElementById('ui-ns-b').innerText = state.batStats[state.nonStriker].b;
        document.getElementById('ui-bw-nm').innerText = state.bowler;

        let bHtml = "";
        for(let p in state.batStats) bHtml += `<tr><td>${p}</td><td>${state.batStats[p].r}</td><td>${state.batStats[p].b}</td></tr>`;
        document.querySelector('#bat-table tbody').innerHTML = bHtml;

        let boHtml = "";
        for(let p in state.bwlStats) {
            let b = state.bwlStats[p];
            boHtml += `<tr><td>${p}</td><td>${Math.floor(b.o/6)}.${b.o%6}</td><td>${b.r}</td><td>${b.w}</td></tr>`;
        }
        document.querySelector('#bwl-table tbody').innerHTML = boHtml;
    }
</script>
</body>
</html>
