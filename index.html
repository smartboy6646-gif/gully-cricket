<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Stickman Penalty Tournament V2</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    margin:0;
    background:#0b3d1c;
    color:#fff;
    font-family:Arial;
    text-align:center;
}
canvas{
    background:#1e7f3f;
    display:block;
    margin:auto;
}
button{
    padding:8px 14px;
    margin:4px;
    border:none;
    border-radius:5px;
    cursor:pointer;
}
#ui{padding:10px;font-size:14px}
.fade{opacity:0.3}
</style>
</head>
<body>

<h3>‚öΩ Stickman Penalty Tournament (V2)</h3>
<div id="ui"></div>
<canvas id="game" width="360" height="520"></canvas>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const ui=document.getElementById("ui");

const teams=[
"Brazil","Argentina","France","Germany","Spain","Portugal","England","Italy",
"Netherlands","Belgium","Croatia","Uruguay","Mexico","USA","Japan","Korea",
"Senegal","Morocco","Nigeria","Ghana","Cameroon","Egypt","Iran","Saudi",
"Australia","Denmark","Poland","Serbia","Switzerland","Sweden","Chile","Colombia"
];

let userTeam=null;
let roundTeams=[],nextRound=[];
let matchIndex=0;
let scoreA=0,scoreB=0,shot=0;
let state="select";
let ball={x:180,y:360,dx:0,dy:0,move:false};
let history=[];

const roundNames={
32:"Round of 32",
16:"Round of 16",
8:"Quarter Final",
4:"Semi Final",
2:"Final"
};

function stickman(x,y){
ctx.strokeStyle="#fff";
ctx.lineWidth=2;
ctx.beginPath();
ctx.arc(x,y-15,8,0,Math.PI*2);
ctx.moveTo(x,y-7);ctx.lineTo(x,y+20);
ctx.moveTo(x,y);ctx.lineTo(x-10,y+10);
ctx.moveTo(x,y);ctx.lineTo(x+10,y+10);
ctx.moveTo(x,y+20);ctx.lineTo(x-8,y+35);
ctx.moveTo(x,y+20);ctx.lineTo(x+8,y+35);
ctx.stroke();
}

function goalPost(){
ctx.strokeStyle="#fff";
ctx.strokeRect(110,80,140,50);
}

function drawBall(){
ctx.fillStyle="#fff";
ctx.beginPath();
ctx.arc(ball.x,ball.y,6,0,Math.PI*2);
ctx.fill();
}

function selectUI(){
ui.innerHTML="<b>Select Your Team</b><br>";
teams.forEach(t=>{
let b=document.createElement("button");
b.innerText=t;
b.onclick=()=>{
userTeam=t;
roundTeams=[...teams];
state="play";
};
ui.appendChild(b);
});
}

function startMatch(){
scoreA=0;scoreB=0;shot=0;
state="kick";
}

function shoot(){
let goal=Math.random()>0.4;
ball.move=true;
ball.dx=(Math.random()*4)-2;
ball.dy=-5;
setTimeout(()=>{
ball.move=false;
ball.x=180;ball.y=360;
if(goal){
if(shot%2===0)scoreA++; else scoreB++;
}
shot++;
if(shot>=10)finishMatch();
},600);
}

function finishMatch(){
let A=roundTeams[matchIndex];
let B=roundTeams[matchIndex+1];
let winner=scoreA>=scoreB?A:B;
let loser =scoreA>=scoreB?B:A;
nextRound.push(winner);
history.push(`${A} ${scoreA} - ${scoreB} ${B}`);
state="result";

setTimeout(()=>{
matchIndex+=2;
if(matchIndex>=roundTeams.length){
roundTeams=[...nextRound];
nextRound=[];
matchIndex=0;
}
if(roundTeams.length===1){
ui.innerHTML=`üèÜ CHAMPION: ${roundTeams[0]}`;
state="end";
}else{
startMatch();
}
},2000);
}

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);

if(state==="play"){
ui.innerHTML=`<b>${roundNames[roundTeams.length]}</b><br>Your Team: ${userTeam}`;
startMatch();
}

if(state==="kick"){
let A=roundTeams[matchIndex];
let B=roundTeams[matchIndex+1];

ctx.fillText(A,30,30);
ctx.fillText(B,260,30);
ctx.fillText(`Score ${scoreA} - ${scoreB}`,140,55);

goalPost();
stickman(180,380);
stickman(180,150);

if(ball.move){
ball.x+=ball.dx;
ball.y+=ball.dy;
}
drawBall();

if(Math.random()>0.97 && !ball.move){
shoot();
}
}

if(state==="result"){
ctx.fillText(history[history.length-1],70,250);
}

requestAnimationFrame(draw);
}

selectUI();
draw();
</script>
</body>
</html>
